////////////////////////////////////////////////////////////////////////////////////////
//  
//	PkArray.cpp: - the static methods of templates
//                  CPkArrBase, CPkArray, CPkIntrinsicArray, CPkTypedPtrArray
//
// 


//////////////////////////////////////////////////////////////////////////////////////
// INCLUDE FILES
//////////////////////////////////////////////////////////////////////////////////////

#include "stdafx.h"
#include "PkArray.h"

//////////////////////////////////////////////////////////////////////////////////////
// MANIFESTED CONSTANTS & MACROS
//////////////////////////////////////////////////////////////////////////////////////
#ifdef _DEBUG
#undef THIS_FILE
static char THIS_FILE[]=__FILE__;
#define new DEBUG_NEW
#endif

//////////////////////////////////////////////////////////////////////////////////////
// PUBLIC FUNCTIONS
//////////////////////////////////////////////////////////////////////////////////////

PKMFCEXT_API CObject* WINAPI CopyObject(CObject const *ptr)
{
    CObject* ptrRes = NULL;

    if (ptr)
    {
        CMemFile  file;
        CArchive  arStore(&file, CArchive::store);
        CArchive  arRead(&file, CArchive::load);

        ASSERT_VALID(ptr);
        // lets write the object to the memfile, using arStore
        arStore.WriteObject(ptr);
        arStore.Flush();
        // now read the object
        file.SeekToBegin();
        ptrRes = arRead.ReadObject(NULL);
    }

    return ptrRes;
}